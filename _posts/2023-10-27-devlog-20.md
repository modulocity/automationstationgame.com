---
title: "Devlog #20: Caches & Decrypters"
header: 
  image: /assets/images/devlogs/devlog_20/event_header.png
tags:
  - Devlog
---

Welcome back to another devlog for Automation Station! Over the past two weeks, I've been hard at work creating and refining a brand new progression system that will be the primary way you unlock new buildings and recipes in the game. We'll also be walking through my design process for the new hologram shader.

## Caches

As you explore your islands, you can now discover mysterious **Caches**. 

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/XoL7Rh8.mp4" type="video/mp4" />
</video>

These enigmatic structures are scattered throughout your world, each guarding precious encrypted cartridges. To unlock access to these cartridges, you'll need to deliver specific items to the locks adjacent to the Cache itself. Each lock requires different items to unlock. At the start of the game, one of the first Caches you can unlock only requires raw stone, which is easily mineable from a nearby stone ore node. Delivering enough stone to the Cache lock will unlock the Cache, revealing the cartridge inside.

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/cAtgdKo.mp4" type="video/mp4" />
</video>

Each lock has a hologram indicating the required item. Hovering over the hologram will give you a tooltip showing what needs to be delivered. As you provide the required items, the circular progress bar on the lock will fill up, tracking the progress of the lock. Caches can also have multiple locks, some of which require items that need to be smelted, refined, or crafted in your factory.

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/np1TviF.mp4" type="video/mp4" />
</video>

This design works well for up to three locks on a single Cache, which is currently the maximum I'm planning. However, later in the game, each lock might require hundreds of items to unlock, incentivizing automated production and delivery.

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/LfbtY0N.mp4" type="video/mp4" />
</video>

The design of the cartridge is pretty obviously inspired by a particular retro video game console. I'm not sure if I'll keep this design or come up with something more unique, but I think a video game cartridge is a fun way to communicate that there is information hidden inside.

![Encrypted Cartridge](/assets/images/devlogs/devlog_20/cartridge.png)

## Decrypter

Once you've successfully unlocked a Cache, you'll find an encrypted cartridge inside. To reveal its secrets, you'll need to take it to the **Decrypter**. I'm still iterating on the design of this building, but here is what it looks like:

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/loThaiE.mp4" type="video/mp4" />
</video>

Delivering a cartridge to the Decrypter will immediately kick off the decryption process. This will take some time, so you can check the loading bar on the sides to track its progress.

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/UxLgqPA.mp4" type="video/mp4" />
</video>

I tried creating a sci-fi visual effect for when the cartridges are being decrypted. I'm still relatively new to VFX, but I'm reasonably happy with this first attempt.

The main missing piece in the decryption process is actually unlocking the new building or recipe. I wasn't able to get to it this sprint, but the plan is to add some kind of notification popup to the UI explaining what was unlocked as well as some kind of visual indication in the build menu of what was recently unlocked.

One of the open design questions I still have for the Decrypter is how players will first gain access to it. Since the cartridges gate all of the building and recipe unlocks, I'll likely need to give this to the player at the start of the game. I'm considering integrating this into some larger HUB structure where the player would initially spawn and perhaps provide some other utilities (like manual crafting and maybe early power generation). I plan to tackle that later, so for now, a single Decrypter will spawn at the center of the world at the start of the game.

## Creating the Hologram Shader

Since each Cache lock requires different items, I needed some way to communicate this to the player. Tooltips are great, but I don't think they should be the only way to provide this information. My solution was to make each lock show a hologram of the item type they require. In order to be effective, it is important that the holograms are clear and easily distinguishable.

My first attempt at a hologram shader was a more traditional hologram effect that is partially transparent and has glitchy animated "lines" scrolling across:

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/iMLJDSi.mp4" type="video/mp4" />
</video>

However, this looked quite noisy and cluttered. I then tried a clear blue type of effect:

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/g7DDbxm.mp4" type="video/mp4" />
</video>

While I think this looks super cool, it looks more like clear blue plastic than a hologram. I then tried adding back in some of the glitches and scrolling lines:

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/qnbBqw6.mp4" type="video/mp4" />
</video>

This really hurt the visibility again, so it clearly wasn't the right solution. To improve the readability, I tried going back to the first design that used the item colors rather than the blue, but this time I removed the scrolling lines.

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/lj4aSsl.mp4" type="video/mp4" />
</video>

This worked better, but I realized there was another problem: by making the items partially transparent, there was a lot of visual noise from seeing the internals and backs of the items. So rather than true transparency, I tried a dither transparency effect. This is a common technique used in video games to avoid the performance impact of "real" transparency. But this also has the benefit of only showing the front of the item in the hologram.

<video width="100%" autoplay="autoplay" loop="true" muted>
  <source src="https://i.imgur.com/eZL0Qbm.mp4" type="video/mp4" />
</video>

This version made it much easier to parse the items since they look much closer to how the real items look in the game. But at the same time, the dither effect in combination with the glitchy jitter made the holograms feel less like physical objects in the world, which helps sell the effect.

Here is a still image of the holograms:

![Hologram](/assets/images/devlogs/devlog_20/hologram.png)

While I might still tweak the colors and lighting on these holograms, I'm very happy with the final result. I'd love to hear your thoughts or suggestions for improving the hologram shader!

## The Technical Side

Behind the scenes, I've made significant updates to support these new systems. In addition to the shader itself, I implemented a new system for generating holograms of every item in the game. I've also expanded the world generation to spawn Caches and Decrypters, which required adding support for multi-tile structures such as the cache.

Furthermore, I've updated to a new version of Unity and updated all of the packages I depend on, providing access to bug fixes and new engine features. I also fixed up the automated build pipeline to ensure a smooth development process.

## What's Next?

With the Caches & Decrypter systems in place, I finally have the required pieces to add some proper progression to the game. One of the next tasks I'll work on is actually implementing the building unlocking so the building menu expands to include the building only after you have decrypted the required cartridge. But there is still a lot to do under the umbrella of progression. I plan to implement a similar item requirement system for the pylons that unlock new islands. Stay tuned for more information on all of that in the upcoming devlogs!

## Changelog:

Here are all the big changes since the last devlog:

- Created several new hologram shaders
- Created a new workflow for automatically generating holograms for every item
- Designed and modeled the new Cache structures
- Updated world gen to spawn Caches
- Added circular progress bars to Cache locks
- Added holograms to Cache locks
- Added dropoff slot to Cache locks, restricted to the required item
- Updated Cache spawning to configure the cache based on a given requirements and reward
- Added a custom interaction for "quick filling" a hologram from your inventory by clicking on the hologram
- Added support for disabled hover tooltips to allow players to see required items for Cache locks
- Made Cache locks consume the items delivered to their slot
- Made Cache locks update their circular progress bars after consuming an item
- Designed and modeled a Cartridge containing encrypted building schematics and recipes
- Designed and modeled a Decrypter that will decrypt cartridges over time
- Created a new progress bar shader for the Decrypter
- Updated world gen to spawn Decrypter
- Updated Cache system to spawn the correct cartridge based on its configuration
- Added flip animation for when all Cache locks are unlocked
- Added new decryption VFX for when a cartridge is being decrypted
- Added Decrypter system that "decrypts" the cartridge, consuming it and updating the progress bar over time
- Added support for multi-tile entities to world gen and grid system
- Removed unused shader to improve build times
- Fixed the automated game build pipeline
- Updated to latest version of Unity and all packages

Thank you for your continued support and enthusiasm for Automation Station. Have a great weekend!

-Scott